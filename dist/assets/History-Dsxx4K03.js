const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Ck6HoDJT.js","assets/index-h1D7MoCs.js","assets/index-NrFXhBWK.css"])))=>i.map(i=>d[i]);
import{t as R,a as E,c as L,j as e,u as k,r as h,f as p,L as C,R as r,_ as l}from"./index-h1D7MoCs.js";import{E as j,H as n,D as z}from"./ErrorMessage-BbCqfH9Y.js";import{C as y,S as T}from"./sun-C_PXEYYM.js";function A(t,a){const s=R(t);return isNaN(a)?E(t,NaN):(s.setDate(s.getDate()+a),s)}function g(t,a){return A(t,-1)}/**
 * @license lucide-react v0.370.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=L("Thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]),S=({title:t,children:a,icon:s})=>e.jsxs("div",{className:"glass p-6 flex flex-col w-full h-full max-h-[500px]",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s&&e.jsx("span",{className:"text-purple-400 p-2 bg-purple-500/10 rounded-xl",children:s}),e.jsx("h3",{className:"text-xl font-semibold text-white tracking-wide",children:t})]}),e.jsx("div",{className:"flex-1 w-full min-h-0",children:a})]}),I=r.lazy(()=>l(()=>import("./index-Ck6HoDJT.js"),__vite__mapDeps([0,1,2])).then(t=>({default:t.LineChart}))),M=r.lazy(()=>l(()=>import("./index-Ck6HoDJT.js"),__vite__mapDeps([0,1,2])).then(t=>({default:t.Line}))),V=r.lazy(()=>l(()=>import("./index-Ck6HoDJT.js"),__vite__mapDeps([0,1,2])).then(t=>({default:t.XAxis}))),H=r.lazy(()=>l(()=>import("./index-Ck6HoDJT.js"),__vite__mapDeps([0,1,2])).then(t=>({default:t.YAxis}))),O=r.lazy(()=>l(()=>import("./index-Ck6HoDJT.js"),__vite__mapDeps([0,1,2])).then(t=>({default:t.CartesianGrid}))),P=r.lazy(()=>l(()=>import("./index-Ck6HoDJT.js"),__vite__mapDeps([0,1,2])).then(t=>({default:t.Tooltip}))),$=r.lazy(()=>l(()=>import("./index-Ck6HoDJT.js"),__vite__mapDeps([0,1,2])).then(t=>({default:t.ResponsiveContainer}))),G=()=>{const{fetchHistorical:t,historicalData:a,loading:s,error:f,unit:u,searchQuery:c}=k(),[d,v]=h.useState(p(g(new Date),"yyyy-MM-dd"));h.useEffect(()=>{c&&D()},[d,u]);const D=()=>{if(!c)return;const o=new Date(d);isNaN(o.getTime())||t(c,o)};if(s)return e.jsx(C,{fullScreen:!1});const N=p(g(new Date),"yyyy-MM-dd"),b=()=>{if(f)return e.jsx(j,{message:f});if(!a||!a.historical)return e.jsxs("div",{className:"glass p-10 flex flex-col items-center justify-center text-center min-h-[300px]",children:[e.jsx(y,{size:48,className:"text-gray-500 mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No Historical Data"}),e.jsx("p",{className:"text-gray-400",children:"Search for a location first, then select a date to view past weather."})]});const o=Object.keys(a.historical)[0],i=a.historical[o];if(!i)return e.jsx(j,{message:"No data available for this date."});const w=i.hourly.map(x=>({time:`${String(Math.floor(parseInt(x.time)/100)).padStart(2,"0")}:00`,temperature:x.temperature,humidity:x.humidity})),m=u==="m"?"°C":"°F";return e.jsxs("div",{className:"flex flex-col gap-6 w-full animate-in fade-in zoom-in duration-500",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(n,{title:"Avg Temp",value:i.avgtemp,unit:m,icon:e.jsx(_,{size:20})}),e.jsx(n,{title:"Min / Max",value:`${i.mintemp} / ${i.maxtemp}`,unit:m,icon:e.jsx(_,{size:20})}),e.jsx(n,{title:"Total Snow",value:i.totalsnow,unit:"cm",icon:e.jsx(z,{size:20})}),e.jsx(n,{title:"UV Index",value:i.uv_index,icon:e.jsx(T,{size:20})})]}),e.jsx("div",{className:"mt-4 h-[400px]",children:e.jsx(S,{title:`Hourly Temperature (${m})`,children:e.jsx(r.Suspense,{fallback:e.jsx("div",{className:"h-full flex items-center justify-center text-gray-400",children:"Loading chart..."}),children:e.jsx($,{width:"100%",height:"100%",children:e.jsxs(I,{data:w,margin:{top:10,right:30,left:0,bottom:0},children:[e.jsx(O,{strokeDasharray:"3 3",stroke:"#ffffff20",vertical:!1}),e.jsx(V,{dataKey:"time",stroke:"#9ca3af",tick:{fill:"#9ca3af"},axisLine:!1,tickLine:!1}),e.jsx(H,{stroke:"#9ca3af",tick:{fill:"#9ca3af"},axisLine:!1,tickLine:!1}),e.jsx(P,{contentStyle:{backgroundColor:"rgba(0,0,0,0.8)",borderColor:"rgba(255,255,255,0.1)",borderRadius:"12px"},itemStyle:{color:"#60a5fa"}}),e.jsx(M,{type:"monotone",dataKey:"temperature",stroke:"#60a5fa",strokeWidth:3,dot:{fill:"#60a5fa",strokeWidth:2,r:4},activeDot:{r:6,stroke:"#fff"}})]})})})})})]})};return e.jsxs("div",{className:"flex flex-col gap-6 w-full mx-auto",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-2",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Historical Data"}),e.jsxs("div",{className:"flex items-center gap-3 bg-black/20 p-2 rounded-xl border border-white/10 w-full md:w-auto",children:[e.jsx(y,{className:"text-gray-400 ml-2",size:20}),e.jsx("input",{type:"date",value:d,max:N,onChange:o=>v(o.target.value),className:"bg-transparent border-none text-white focus:outline-none focus:ring-0 p-1 w-full"})]})]}),b()]})};export{G as default};
